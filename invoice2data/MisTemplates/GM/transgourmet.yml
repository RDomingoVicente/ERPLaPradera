issuer: Transgourmet GM

fields:
  invoice_number:
    parser: regex
    regex: 'FACTURA\s+(\d{15})'
  
  date:
    parser: regex
    regex: 'FECHA\s+(\d{2}-\d{2}-\d{4})'
    date_format: "%d-%m-%Y"
  
  albaran:
    parser: regex
    regex: 'ALBARAN\s+(\d{9})'
  
  amount:
    parser: regex
    regex: 'TOTAL\s+FACTURA\s+([0-9.,]+)'
  
  cliente_id:
    parser: regex
    regex: 'CLIENTE\s+(\d+)\s+NIF'
  

  cliente_nombre:
    parser: regex
    regex: '([A-Z]+\s+[A-Z]+\s+[A-Z]+\s+[A-Z]+)\s+\1'
    
  nif:
    parser: regex
    regex: 'NIF/CIF\s+(\d+[A-Z])'
  
  direccion_fiscal:
    parser: regex
    regex: 'DIRECCIÓN\s+FISCAL.*?\n.*?\n([A-Z\s0-9,\.]+)\n(\d{5}-[A-Z\s]+)\n([A-Z]+)'
  
  telefono:
    parser: regex
    regex: 'Telf:\s+(\d{9})'

  detail_lines:
    parser: lines
    start: 'ALIMENTACIÓN|BAZAR\s+Y\s+TEXTIL|\s*CODIGO|BEBIDAS|CARNICERIA|CHARCUTERIA|DERIVADOS\s+LACTEOS|DROG/PERF/HIGIENE|PLATOS\s+COCINADOS\s+Y\s+PRECOCINADO|QUESOS'
    end: '\s+Página|PAGADO'
    skip_line: '\s+Página\s+de|\s*Lote\s+:|^GM\s+CASH\s+BURGOS|^Horario|^Servicio|^ES$|^cash&carry|^sólo\s+profesionales|^\d+\.\d+/BU|^UE$|^N\.I\.F\.|^CENTRO\s+DE|^LAS\s+LODERAS|^VERA\s+CRUZ|^\d{5}-|^BURGOS$|^FACTURA|^TIPO\s+PRECIO|^CODIGO\s+DESCRIPCIÓN|^OFER\.|^ALIMENTACIÓN$|^BAZAR|^BEBIDAS$|^CARNICERIA$|^CHARCUTERIA$|^DERIVADOS|^DROG/PERF|^PLATOS\s+COCINADOS|^QUESOS$|^Transgourmet|^Pol\.Emporda|^REGISTRO|^Importe\s*$|^Importe\s*\*\s*$'
    line: (?P<codigo>\d{8})\s+(?P<description>.+?)\s+(?P<iva>\d+,\d+%)\s+(?P<cantidad>[0-9.,]+)\s+(?P<unidades>[0-9.,]+)\s+(?:\w+\s+)?(?P<precio_sin_iva>[0-9.,]+)\s+(?P<precio_con_iva>[0-9.,]+)\s+(?P<total>[0-9.,]+)
    
    types:
      - codigo: str
      - description: str
      - iva: str
      - cantidad: float
      - precio_sin_iva: float
      - precio_con_iva: float
      - total: float
  base_imponible:
    parser: regex
    regex: (?:Aplicación de Promociones\s+[0-9.,]+\s+)?PAGADO\s+BASE\s+(?P<cantidad>[0-9.,]+)
  iva_total:
    parser: regex
    regex: 'IVA\s+([0-9.,]+)'

  resumen_lines:
    parser: lines
    start: 'Cuota\s*IVA'
    end: 'Transgourmet\s*Ibérica|Num\.\s*Aut'
    line: '.*?(?P<porcentaje_iva>\d+,\d{2})\s+(?P<base_imponible>\d+,\d{2})\s+(?P<cuota_iva>\d+,\d{2})\s*$'
  
keywords:
  - FACTURA
  - Transgourmet
  - TOTAL FACTURA
  - GM CASH BURGOS

options:
  currency: EUR
  date_formats:
    - '%d-%m-%Y'
  decimal_separator: ','
  remove_whitespace: false
  languages:
    - es